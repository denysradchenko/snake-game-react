{"version":3,"sources":["service/SnakeService.js","Field.js","GameBoard.js","GameOver.js","Game.js","GameFreeze.js","App.js","index.js"],"names":["SnakeService","colSize","rowSize","snake","result","genNmbr","rng","Math","floor","random","appleCol","appleRow","some","el","column","row","this","getNewApple","apple","direction","oldSnake","Object","toConsumableArray","newHead","objectSpread","newApple","head","newBody","slice","push","concat","newSnake","arguments","length","undefined","Field","_ref","value","fieldClass","fieldValue","react_default","a","createElement","className","GameBoard","fields","_loop","i","_loop2","j","key","src_Field_0","find","gameBoard","map","GameOver","newGame","role","onClick","Game","interval","state","_this","getInitGame","refreshApple","_this$state","setState","snakeMovement","_this$state2","newState","getActualBoard","props","clearInterval","gameOver","document","addEventListener","handleKeyDown","setInterval","_this$state3","src_GameBoard_0","src_GameOver_0","Component","GameFreeze","App","e","keyCode","preventDefault","prevState","Fragment","src_Game_0","src_GameFreeze_0","ReactDOM","render","src_App","getElementById"],"mappings":"wVAAqBA,sGACPC,EAASC,EAASC,GAC5B,IAAIC,EAAS,KAEPC,EAAU,SAAAC,GAAG,OAAIC,KAAKC,MAAMD,KAAKE,SAAWH,IAE5CI,EAAWL,EAAQJ,GACnBU,EAAWN,EAAQH,GAKzB,OAJAE,EAAS,CAACM,EAAUC,GAChBR,EAAMS,KAAK,SAACC,GAAD,OAAQA,EAAGC,SAAWJ,GAAYG,EAAGE,MAAQJ,MAC1DP,EAASY,KAAKC,YAAYhB,EAASC,EAASC,IAEvCC,yCAGMH,EAASC,EAASgB,EAAOf,EAAOgB,GAG7C,GAAkB,YAAdA,GAA4C,IAAjBhB,EAAM,GAAGY,IAAW,MAAO,WAC1D,GAAkB,cAAdI,GAA6BhB,EAAM,GAAGY,MAAQb,EAAU,EAAG,MAAO,WACtE,GAAkB,cAAdiB,GAAiD,IAApBhB,EAAM,GAAGW,OAAc,MAAO,WAC/D,GAAkB,eAAdK,GAA8BhB,EAAM,GAAGW,SAAWb,EAAU,EAAG,MAAO,WAE1E,IAAMmB,EAAQC,OAAAC,EAAA,EAAAD,CAAOlB,GAEfoB,EAAOF,OAAAG,EAAA,EAAAH,CAAA,GACRD,EAAS,IAGVK,EAAWP,EAEfE,EAAS,GAAGM,MAAO,EAGD,YAAdP,IAAyBI,EAAQR,KAAO,GAC1B,cAAdI,IAA2BI,EAAQR,KAAO,GAC5B,cAAdI,IAA2BI,EAAQT,QAAU,GAC/B,eAAdK,IAA4BI,EAAQT,QAAU,GAGlD,IAAMa,EAAON,OAAAC,EAAA,EAAAD,CAAOD,EAASQ,MAAM,GAAI,IACnCL,EAAQT,SAAWI,EAAM,IAAMK,EAAQR,MAAQG,EAAM,KACvDS,EAAQE,KAAKT,EAASQ,OAAO,GAAG,IAChCH,EAAWT,KAAKC,YAAYhB,EAASC,EAA1B,CAAoCqB,GAApCO,OAAAT,OAAAC,EAAA,EAAAD,CAAgDM,MAG7D,IAAMI,EAAQ,CAAIR,GAAJO,OAAAT,OAAAC,EAAA,EAAAD,CAAgBM,IAE9B,OAAIA,EAAQf,KAAK,SAAAC,GAAE,OAAIA,EAAGC,SAAWS,EAAQT,QAAUD,EAAGE,MAAQQ,EAAQR,MAAa,WAEhF,CACLd,UACAC,UACAgB,MAAOO,EACPtB,MAAO4B,yCAKT,MAAO,CACL9B,QAFoC+B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAlB,GAGlB9B,QAHoC8B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAIhCd,MAAO,CAAC,EAAG,GACXf,MAAO,CAAC,CACJW,OAAQ,EACRC,IAAK,EACLW,MAAM,GAER,CACEZ,OAAQ,EACRC,IAAK,GAEP,CACED,OAAQ,EACRC,IAAK,cC1DAoB,SAbD,SAAAC,GAAe,IAAZC,EAAYD,EAAZC,MACXC,EAAa,QACH,UAAVD,EAAmBC,GAAc,eAClB,UAAVD,EAAmBC,GAAc,eACvB,cAAVD,IAAuBC,GAAc,oBAE9C,IAAMC,EAAuB,UAAVF,EAAoBG,EAAAC,EAAAC,cAAA,KAAGC,UAAU,qBAA0B,KAE9E,OACEH,EAAAC,EAAAC,cAAA,OAAKC,UAAWL,GAAaC,KCyBlBK,SAjCG,SAAAR,GAGhB,IAHwD,IAArCnC,EAAqCmC,EAArCnC,QAASC,EAA4BkC,EAA5BlC,QAASC,EAAmBiC,EAAnBjC,MAAOe,EAAYkB,EAAZlB,MACtC2B,EAAS,GADyCC,EAAA,SAG/CC,GACPF,EAAOE,GAAK,GACZ,IALsD,IAAAC,EAAA,SAK7CC,GACP,IAAMC,EAAG,GAAApB,OAAMiB,EAAIE,GACfF,IAAM7B,EAAM,IAAM+B,IAAM/B,EAAM,GAChC2B,EAAOE,GAAGE,GAAKT,EAAAC,EAAAC,cAACS,EAAD,CAAOd,MAAM,QAAQa,IAAKA,IAChC/C,EAAMS,KAAK,SAACC,GAAD,OAAQA,EAAGC,SAAWiC,GAAKlC,EAAGE,MAAQkC,IACtD9C,EAAMiD,KAAK,SAAAvC,GAAE,OAAIA,EAAGC,SAAWiC,GAAKlC,EAAGE,MAAQkC,IAAGvB,KACpDmB,EAAOE,GAAGE,GAAKT,EAAAC,EAAAC,cAACS,EAAD,CAAOd,MAAM,YAAYa,IAAKA,IAE7CL,EAAOE,GAAGE,GAAKT,EAAAC,EAAAC,cAACS,EAAD,CAAOd,MAAM,QAAQa,IAAKA,IAG3CL,EAAOE,GAAGE,GAAKT,EAAAC,EAAAC,cAACS,EAAD,CAAOd,MAAM,QAAQa,IAAKA,KAXpCD,EAAI,EAAGA,EAAI/C,EAAS+C,IAAKD,EAAzBC,IAFFF,EAAI,EAAGA,EAAI9C,EAAS8C,IAAKD,EAAzBC,GAkBT,IAAMM,EAAYR,EAAOS,IAAI,SAACzC,EAAIkC,GAChC,IAAMG,EAAG,MAAApB,OAASiB,EAAI,GACtB,OAAOP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SAASO,IAAKA,GAAMrC,KAG5C,OACE2B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACZU,KClBQE,eAXE,SAAAnB,GAAiB,IAAdoB,EAAcpB,EAAdoB,QAClB,OACEhB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBAAqBc,KAAK,SACvCjB,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,UAAQgB,QAASF,EAASb,UAAU,mBAApC,eC6COgB,6MA9CbC,SAAW,OAEX5D,aAAe,IAAIA,IAEnB6D,MAAQC,EAAK9D,aAAa+D,gBAE1BC,aAAe,WAAM,IAAAC,EACiBH,EAAKD,MAAjC5D,EADWgE,EACXhE,QAASC,EADE+D,EACF/D,QAASC,EADP8D,EACO9D,MACpBe,EAAQ4C,EAAK9D,aAAaiB,YAAYhB,EAASC,EAASC,GAC9D2D,EAAKI,SAAS,CAAEhD,aAGlBiD,cAAgB,WAAM,IAAAC,EACuBN,EAAKD,MAAxC5D,EADYmE,EACZnE,QAASC,EADGkE,EACHlE,QAASC,EADNiE,EACMjE,MAAOe,EADbkD,EACalD,MAC3BmD,EAAWP,EAAK9D,aAAasE,eAAerE,EAASC,EAASgB,EAAOf,EAAO2D,EAAKS,MAAMpD,WAE7F,GAAiB,aAAbkD,EAGF,OAFAG,cAAcV,EAAKF,eACnBE,EAAKI,SAAS,CAAEO,UAAU,IAI5BX,EAAKI,SAASG,uFAIdK,SAASC,iBAAiB,UAAW3D,KAAKuD,MAAMK,eAChD5D,KAAK4C,SAAWiB,YAAY7D,KAAKmD,cAAe,sCAGzC,IAAAW,EAC8C9D,KAAK6C,MAAlD5D,EADD6E,EACC7E,QAASC,EADV4E,EACU5E,QAASC,EADnB2E,EACmB3E,MAAOe,EAD1B4D,EAC0B5D,MAAOuD,EADjCK,EACiCL,SACxC,OACEjC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACbH,EAAAC,EAAAC,cAACqC,EAAD,CACE9E,QAASA,EACTC,QAASA,EACTC,MAAOA,EACPe,MAAOA,IAERuD,EAAWjC,EAAAC,EAAAC,cAACsC,EAAD,CAAUxB,QAASxC,KAAKuD,MAAMf,UAAc,aAzC7CyB,aCwBJC,oNAvBblF,aAAe,IAAIA,IAEnB6D,MAAQC,EAAK9D,aAAa+D,iGAGxBW,SAASC,iBAAiB,UAAW3D,KAAKuD,MAAMK,gDAGzC,IAAAX,EACoCjD,KAAK6C,MAAxC5D,EADDgE,EACChE,QAASC,EADV+D,EACU/D,QAASC,EADnB8D,EACmB9D,MAAOe,EAD1B+C,EAC0B/C,MACjC,OACEsB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAACqC,EAAD,CACE9E,QAASA,EACTC,QAASA,EACTC,MAAOA,EACPe,MAAOA,YAlBQ+D,cCyCVE,0NAvCbtB,MAAQ,CACN1C,UAAW,QAGbyD,cAAgB,SAACQ,GACG,KAAdA,EAAEC,QAIFD,EAAEC,QAAU,IAAMD,EAAEC,QAAU,KAClCD,EAAEE,iBACFxB,EAAKI,SAAS,SAACqB,GACb,IAA4B,YAAxBA,EAAUpE,WAAqC,cAAViE,EAAElC,OACf,cAAxBqC,EAAUpE,WAAuC,YAAViE,EAAElC,OACjB,cAAxBqC,EAAUpE,WAAuC,eAAViE,EAAElC,OACjB,eAAxBqC,EAAUpE,WAAwC,cAAViE,EAAElC,KAC9C,MAAQ,CAAE/B,UAAWiE,EAAElC,QAVvBY,EAAKI,SAAS,CAAE/C,UAAW,UAc/BqC,QAAU,WACRM,EAAKI,SAAS,CACZ/C,UAAW,gFAIN,IACCA,EAAcH,KAAK6C,MAAnB1C,UACR,OACEqB,EAAAC,EAAAC,cAAAF,EAAAC,EAAA+C,SAAA,KACiB,OAAdrE,EACCqB,EAAAC,EAAAC,cAAC+C,EAAD,CAAMtE,UAAWA,EAAWyD,cAAe5D,KAAK4D,cAAepB,QAASxC,KAAKwC,UAC7EhB,EAAAC,EAAAC,cAACgD,EAAD,CAAYd,cAAe5D,KAAK4D,wBAjCxBK,cCDlBU,IAASC,OAAOpD,EAAAC,EAAAC,cAACmD,EAAD,MAASnB,SAASoB,eAAe","file":"static/js/main.a7cd52ee.chunk.js","sourcesContent":["export default class SnakeService {\r\n  getNewApple(colSize, rowSize, snake) {\r\n    let result = null;\r\n\r\n    const genNmbr = rng => Math.floor(Math.random() * rng);\r\n\r\n    const appleCol = genNmbr(colSize);\r\n    const appleRow = genNmbr(rowSize);\r\n    result = [appleCol, appleRow];\r\n    if (snake.some((el) => el.column === appleCol && el.row === appleRow)) {\r\n      result = this.getNewApple(colSize, rowSize, snake)\r\n    }\r\n    return result;\r\n  }\r\n\r\n  getActualBoard(colSize, rowSize, apple, snake, direction) {\r\n    // directions: \"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"\r\n\r\n    if (direction === \"ArrowUp\" && snake[0].row === 0) return 'gameover';\r\n    if (direction === \"ArrowDown\" && snake[0].row === rowSize - 1) return 'gameover';\r\n    if (direction === \"ArrowLeft\" && snake[0].column === 0) return 'gameover';\r\n    if (direction === \"ArrowRight\" && snake[0].column === colSize - 1) return 'gameover';\r\n\r\n    const oldSnake = [...snake];\r\n\r\n    const newHead = {\r\n      ...oldSnake[0]\r\n    };\r\n\r\n    let newApple = apple;\r\n\r\n    oldSnake[0].head = false;\r\n\r\n\r\n    if (direction === \"ArrowUp\") newHead.row -= 1;\r\n    if (direction === \"ArrowDown\") newHead.row += 1;\r\n    if (direction === \"ArrowLeft\") newHead.column -= 1;\r\n    if (direction === \"ArrowRight\") newHead.column += 1;\r\n\r\n\r\n    const newBody = [...oldSnake.slice(0, -1)];\r\n    if (newHead.column === apple[0] && newHead.row === apple[1]) {\r\n      newBody.push(oldSnake.slice(-1)[0]);\r\n      newApple = this.getNewApple(colSize, rowSize, [newHead, ...newBody]);\r\n    }\r\n\r\n    const newSnake = [newHead, ...newBody];\r\n\r\n    if (newBody.some(el => el.column === newHead.column && el.row === newHead.row)) return 'gameover';\r\n\r\n    return {\r\n      colSize,\r\n      rowSize,\r\n      apple: newApple,\r\n      snake: newSnake\r\n    }\r\n  }\r\n\r\n  getInitGame(colSize = 15, rowSize = 15) {\r\n    return {\r\n      colSize,\r\n      rowSize,\r\n      apple: [9, 7],\r\n      snake: [{\r\n          column: 4,\r\n          row: 7,\r\n          head: true\r\n        },\r\n        {\r\n          column: 3,\r\n          row: 7\r\n        },\r\n        {\r\n          column: 2,\r\n          row: 7\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n\r\n// snake [ {column: position, row: position}, ..., ... ]\r\n","import React from 'react';\r\nimport './Field.css';\r\n\r\nconst Field = ({ value }) => {\r\n  let fieldClass = \"Field\";\r\n  if (value === \"apple\") fieldClass += ' field-apple';\r\n  else if (value === \"snake\") fieldClass += ' field-snake';\r\n  else if (value === \"snakehead\") fieldClass += ' field-snakehead';\r\n\r\n  const fieldValue = value === \"apple\" ? <i className=\"fas fa-apple-alt\"></i> : null;\r\n\r\n  return (\r\n    <div className={fieldClass}>{fieldValue}</div>\r\n  );\r\n}\r\n\r\nexport default Field;\r\n","import React from 'react';\r\nimport Field from './Field';\r\nimport './GameBoard.css';\r\n\r\nconst GameBoard = ({ colSize, rowSize, snake, apple }) => {\r\n  const fields = [];\r\n\r\n  for (let i = 0; i < colSize; i++) {\r\n    fields[i] = [];\r\n    for (let j = 0; j < rowSize; j++) {\r\n      const key = `${i + j}`;\r\n      if (i === apple[0] && j === apple[1]) {\r\n        fields[i][j] = <Field value=\"apple\" key={key} />\r\n      } else if (snake.some((el) => el.column === i && el.row === j)) {\r\n        if (snake.find(el => el.column === i && el.row === j).head) {\r\n          fields[i][j] = <Field value=\"snakehead\" key={key} />\r\n        } else {\r\n          fields[i][j] = <Field value=\"snake\" key={key} />\r\n        }\r\n      } else {\r\n        fields[i][j] = <Field value=\"empty\" key={key} />\r\n      }\r\n    }\r\n  }\r\n\r\n  const gameBoard = fields.map((el, i) => {\r\n    const key = `col${i + 1}`;\r\n    return <div className=\"column\" key={key}>{el}</div>\r\n  })\r\n\r\n  return (\r\n    <div className=\"GameBoard\">\r\n      {gameBoard}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GameBoard;\r\n","import React from 'react';\r\nimport './GameOver.css'\r\n\r\nconst GameOver = ({ newGame }) => {\r\n  return (\r\n    <div className=\"GameOver\">\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        <h4>Game Over</h4>\r\n        <button onClick={newGame} className=\"btn btn-success\">Restart</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GameOver;\r\n","import React, { Component } from 'react';\r\nimport SnakeService from './service/SnakeService';\r\nimport GameBoard from './GameBoard';\r\nimport './Game.css';\r\nimport GameOver from './GameOver'\r\n\r\nclass Game extends Component {\r\n  interval = null;\r\n\r\n  SnakeService = new SnakeService();\r\n\r\n  state = this.SnakeService.getInitGame();\r\n\r\n  refreshApple = () => {\r\n    const { colSize, rowSize, snake } = this.state;\r\n    const apple = this.SnakeService.getNewApple(colSize, rowSize, snake);\r\n    this.setState({ apple });\r\n  }\r\n\r\n  snakeMovement = () => {\r\n    const { colSize, rowSize, snake, apple } = this.state;\r\n    const newState = this.SnakeService.getActualBoard(colSize, rowSize, apple, snake, this.props.direction);\r\n\r\n    if (newState === \"gameover\") {\r\n      clearInterval(this.interval);\r\n      this.setState({ gameOver: true })\r\n      return;\r\n    }\r\n\r\n    this.setState(newState)\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this.props.handleKeyDown);\r\n    this.interval = setInterval(this.snakeMovement, 150);\r\n  }\r\n\r\n  render() {\r\n    const { colSize, rowSize, snake, apple, gameOver } = this.state;\r\n    return (\r\n      <div className=\"Game\">\r\n        <GameBoard\r\n          colSize={colSize}\r\n          rowSize={rowSize}\r\n          snake={snake}\r\n          apple={apple}\r\n        />\r\n        {gameOver ? <GameOver newGame={this.props.newGame} /> : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Game;\r\n","import React, { Component } from 'react';\r\nimport SnakeService from './service/SnakeService';\r\nimport GameBoard from './GameBoard';\r\nimport './GameFreeze.css';\r\n\r\nclass GameFreeze extends Component {\r\n\r\n  SnakeService = new SnakeService();\r\n\r\n  state = this.SnakeService.getInitGame();\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this.props.handleKeyDown);\r\n  }\r\n\r\n  render() {\r\n    const { colSize, rowSize, snake, apple } = this.state;\r\n    return (\r\n      <div className=\"GameFreeze\">\r\n        <GameBoard\r\n          colSize={colSize}\r\n          rowSize={rowSize}\r\n          snake={snake}\r\n          apple={apple}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameFreeze;\r\n","import React, { Component } from 'react';\nimport Game from './Game';\nimport GameFreeze from './GameFreeze';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\n\nclass App extends Component {\n  state = {\n    direction: null\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 27) {\n      this.setState({ direction: null });\n      return;\n    }\n    if (e.keyCode < 37 || e.keyCode > 40) return;\n    e.preventDefault();\n    this.setState((prevState) => {\n      if (prevState.direction === \"ArrowUp\" && e.key === \"ArrowDown\") return;\n      if (prevState.direction === \"ArrowDown\" && e.key === \"ArrowUp\") return;\n      if (prevState.direction === \"ArrowLeft\" && e.key === \"ArrowRight\") return;\n      if (prevState.direction === \"ArrowRight\" && e.key === \"ArrowLeft\") return;\n      return ({ direction: e.key })\n    });\n  }\n\n  newGame = () => {\n    this.setState({\n      direction: null\n    });\n  }\n\n  render() {\n    const { direction } = this.state;\n    return (\n      <>\n        {direction !== null ?\n          <Game direction={direction} handleKeyDown={this.handleKeyDown} newGame={this.newGame} /> :\n          <GameFreeze handleKeyDown={this.handleKeyDown} />\n        }\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}